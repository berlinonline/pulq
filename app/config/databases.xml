<?xml version="1.0" encoding="UTF-8"?>
<ae:configurations xmlns="http://agavi.org/agavi/config/parts/databases/1.1" xmlns:ae="http://agavi.org/agavi/config/global/envelope/1.1"
    xmlns:xi="http://www.w3.org/2001/XInclude">

    <xi:include href="../../etc/local/local.databases.xml"
        xpointer="xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.1) xpointer(/ae:configurations/*)">
<!--         <xi:fallback/> -->
    </xi:include>

    
    <xi:include href="../modules/Geo/config/databases.xml"
        xpointer="xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.1) xpointer(/ae:configurations/*)">
<!--             <xi:fallback/> -->
    </xi:include>
    

    <ae:configuration environment="sample_config_for_ElasticsearchCouchdbriverDatabase">
        <databases default="mydb_couch">
            <database name="mydb_couch" class="CouchDatabase">
                <ae:parameter name="url">http://127.0.0.1:5984/</ae:parameter>
                <ae:parameter name="database">mydb</ae:parameter>
<!--                 <ae:parameter name="setup">MydbCouchDatabaseSetup</ae:parameter> -->
            </database>

            <database name="mydb_es" class="ElasticsearchCouchdbriverDatabase">
                <ae:parameter name="host">127.0.0.1</ae:parameter>
                <ae:parameter name="port">9200</ae:parameter>
                <ae:parameter name="transport">Http</ae:parameter>
                <ae:parameter name="index">
                    <!-- An <index-name>.index.json file is expected to be in the setup_dir -->
                    <ae:parameter name="name">mydb</ae:parameter>
                    <ae:parameter name="setup_dir">%core.modules_dir%/MyModule/config/elasticsearch/</ae:parameter>
                    <ae:parameter name="types">
                        <!-- type names are expcted to result in <type-name>.mapping.json files in the index' setup_dir -->
                        <ae:parameter>mydb-sometype</ae:parameter>
                        <ae:parameter>mydb-othertype-</ae:parameter>
                    </ae:parameter>
                </ae:parameter>

                <ae:parameter name="couchdb">mydb_couch</ae:parameter>
                <ae:parameter name="river_url">http://mydb.world.net:5984/</ae:parameter>
                <!-- the script file is expected to be in the setup_dir. if not, the content of this tag is used as the script string directly -->
                <ae:parameter name="river_script">mydb-river-script.js</ae:parameter>
            </database>
        </databases>
    </ae:configuration>

</ae:configurations>
