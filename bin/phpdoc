#!/bin/sh

LOCAL_CONFIG_SH=`dirname $0`/../etc/local/local.config.sh
PROJECT=`readlink -f $( dirname $0 )/..`

if [ -f $LOCAL_CONFIG_SH ] ; then
  echo "[INFO] Found and sourcing the local.config.sh"
  . $LOCAL_CONFIG_SH
else
  echo "[ERROR] Could not source $LOCAL_CONFIG_SH!"
  echo "Make sure to run bin/configure-env before doing anything else after a fresh checkout"
fi

if (test -z "$PHP_COMMAND") ; then
  echo "[ERROR] Unable to find a valid php command!"
  echo "Have you run bin/configure-env.php allready?"
  exit 0
fi

echo "[Executing] `which rlwrap` $PHP_COMMAND -d html_errors=off -f $PROJECT/libs/docblox/bin/docblox.php -- $@"
PHP_COMMAND=$PHP_COMMAND `which rlwrap` $PHP_COMMAND -d error_reporting=1 -d html_errors=off -f $PROJECT/libs/docblox/bin/docblox.php -- $@
